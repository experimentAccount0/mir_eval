language: python
python:
    - "2.7"

#    - "3.4" # not supported due to no scipy wheel available yet

before_install:
# add for profile
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - sudo apt-get update -qq


install:
    - sudo apt-get update -qq
    - sudo apt-get install -qq libatlas-base-dev libatlas3gf-base gfortran

# Install NumPy and SciPy from wheels, as compilation takes ages
# This should be wheels.astropy.org, but there are strange HTTPS errors a.t.m.
    - pip install --no-index --find-links http://www.mpia.de/~robitaille/wheelhouse/ --trusted-host www.mpia.de scipy
    - pip install -e .
    - pip install nose sphinx numpydoc
    # add for profile
    - sudo apt-get install -qq g++-4.8
    - export CXX="g++-4.8"
    - pip install nose-cprof
    - pip install properform

script:
    - nosetests --with-cprofile --cprofile-stats-erase --cprofile-stats-file=profile_mir_eval_15986a51c4_4
    - python -m properform Push 47.88.50.110:15554 asdf_mir_eval_15986a51c4_4 ./tests/profile_mir_eval_15986a51c4_4
    - python setup.py build_sphinx
    - python setup.py egg_info -b.dev sdist --formats gztar
 #2017-08-27 19:45:31 modified at 0 #2017-08-27 19:45:38 modified at 1 #2017-08-27 19:45:44 modified at 2 #2017-08-27 19:45:51 modified at 3 #2017-08-27 19:46:04 modified at 4